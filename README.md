# è®°è´¦ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªå®Œæ•´çš„è®°è´¦ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«åç«¯ API å’Œå‰ç«¯ç®¡ç†ç•Œé¢ã€‚

## åŠŸèƒ½ç‰¹æ€§

### åç«¯
- âœ… Node.js + Express.js
- âœ… SQLite æ•°æ®åº“
- âœ… JWT ç”¨æˆ·è®¤è¯
- âœ… RESTful API
- âœ… ç”¨æˆ·æ³¨å†Œå’Œç™»å½•

### å‰ç«¯
- âœ… React 18
- âœ… æ‰å¹³åŒ– UI è®¾è®¡
- âœ… å“åº”å¼å¸ƒå±€
- âœ… è®°è´¦è®°å½•ç®¡ç†
- âœ… åˆ†ç±»ç®¡ç†
- âœ… ç»Ÿè®¡åˆ†æ
- âœ… éº»å°†è®°å½•ç®¡ç†
- âœ… éº»å°†ç»Ÿè®¡åˆ†æ
- âœ… ç¤¼é‡‘è®°å½•ç®¡ç†ï¼ˆäººæƒ…å¾€æ¥ï¼‰

## é¡¹ç›®ç»“æ„

```
nail/
â”œâ”€â”€ backend/              # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ controllers/     # æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ routes/          # è·¯ç”±
â”‚   â”œâ”€â”€ middleware/      # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ database/        # æ•°æ®åº“
â”‚   â”œâ”€â”€ scripts/         # è„šæœ¬
â”‚   â””â”€â”€ server.js        # æœåŠ¡å™¨å…¥å£
â”œâ”€â”€ frontend/            # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/  # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/       # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ context/     # Context
â”‚   â”‚   â””â”€â”€ utils/       # å·¥å…·
â”‚   â””â”€â”€ package.json
â””â”€â”€ README.md
```

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…åç«¯ä¾èµ–

```bash
npm install
```

### 2. åˆå§‹åŒ–æ•°æ®åº“

```bash
npm run init-db
```

å¦‚æœæ•°æ®åº“å·²å­˜åœ¨ï¼Œè¿è¡Œè¿ç§»ï¼š

```bash
npm run migrate-db
```

åˆå§‹åŒ–éº»å°†è®°å½•è¡¨ï¼š

```bash
npm run init-mahjong
```

åˆå§‹åŒ–ç¤¼é‡‘è®°å½•è¡¨ï¼š

```bash
npm run init-gifts
```

### 3. å¯åŠ¨åç«¯æœåŠ¡å™¨

```bash
npm start
# æˆ–å¼€å‘æ¨¡å¼
npm run dev
```

åç«¯å°†åœ¨ `http://localhost:3000` å¯åŠ¨ã€‚

### 4. å®‰è£…å‰ç«¯ä¾èµ–

```bash
cd frontend
npm install
```

### 5. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨

```bash
npm start
```

å‰ç«¯å°†åœ¨ `http://localhost:3000` å¯åŠ¨ï¼ˆå¦‚æœç«¯å£å†²çªä¼šè‡ªåŠ¨ä½¿ç”¨å…¶ä»–ç«¯å£ï¼‰ã€‚

## ğŸ“¦ éƒ¨ç½²åˆ°å…¶ä»–ç”µè„‘

è¯¦ç»†çš„éƒ¨ç½²æŒ‡å—è¯·æŸ¥çœ‹ [DEPLOYMENT.md](./DEPLOYMENT.md)ï¼ŒåŒ…å«ï¼š
- ç³»ç»Ÿè¦æ±‚
- æ–‡ä»¶ä¼ è¾“æ–¹å¼
- ç¯å¢ƒå‡†å¤‡æ­¥éª¤
- åç«¯å’Œå‰ç«¯éƒ¨ç½²
- å¸¸è§é—®é¢˜è§£å†³
- ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

## ä½¿ç”¨è¯´æ˜

1. **æ³¨å†Œè´¦æˆ·**ï¼šè®¿é—®å‰ç«¯åº”ç”¨ï¼Œç‚¹å‡»"ç«‹å³æ³¨å†Œ"åˆ›å»ºæ–°è´¦æˆ·
2. **ç™»å½•ç³»ç»Ÿ**ï¼šä½¿ç”¨æ³¨å†Œçš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•
3. **ç®¡ç†åˆ†ç±»**ï¼šåœ¨"åˆ†ç±»ç®¡ç†"é¡µé¢æ·»åŠ æ”¶å…¥/æ”¯å‡ºåˆ†ç±»
4. **è®°å½•è´¦ç›®**ï¼šåœ¨"è®°è´¦è®°å½•"é¡µé¢æ·»åŠ æ”¶å…¥æˆ–æ”¯å‡ºè®°å½•
5. **æŸ¥çœ‹ç»Ÿè®¡**ï¼šåœ¨"ç»Ÿè®¡åˆ†æ"é¡µé¢æŸ¥çœ‹æ”¶æ”¯ç»Ÿè®¡å’Œå›¾è¡¨
6. **ç¤¼é‡‘è®°å½•**ï¼šåœ¨"ç¤¼é‡‘è®°å½•"é¡µé¢ç®¡ç†äººæƒ…å¾€æ¥ï¼ˆé€ç¤¼å’Œæ”¶ç¤¼ï¼‰

## API ç«¯ç‚¹

### è®¤è¯
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `GET /api/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ï¼ˆéœ€è¦è®¤è¯ï¼‰

### åˆ†ç±»
- `GET /api/categories` - è·å–æ‰€æœ‰åˆ†ç±»ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `POST /api/categories` - åˆ›å»ºåˆ†ç±»ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `PUT /api/categories/:id` - æ›´æ–°åˆ†ç±»ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `DELETE /api/categories/:id` - åˆ é™¤åˆ†ç±»ï¼ˆéœ€è¦è®¤è¯ï¼‰

### è®°å½•
- `GET /api/records` - è·å–æ‰€æœ‰è®°å½•ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `POST /api/records` - åˆ›å»ºè®°å½•ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `PUT /api/records/:id` - æ›´æ–°è®°å½•ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `DELETE /api/records/:id` - åˆ é™¤è®°å½•ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `GET /api/records/statistics` - è·å–ç»Ÿè®¡ä¿¡æ¯ï¼ˆéœ€è¦è®¤è¯ï¼‰

### éº»å°†
- `GET /api/mahjong` - è·å–æ‰€æœ‰éº»å°†è®°å½•ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `POST /api/mahjong` - åˆ›å»ºéº»å°†è®°å½•ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `PUT /api/mahjong/:id` - æ›´æ–°éº»å°†è®°å½•ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `DELETE /api/mahjong/:id` - åˆ é™¤éº»å°†è®°å½•ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `GET /api/mahjong/statistics` - è·å–éº»å°†ç»Ÿè®¡ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `GET /api/mahjong/statistics/daily` - è·å–æ¯æ—¥ç»Ÿè®¡ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `GET /api/mahjong/statistics/game-types` - è·å–æ¸¸æˆç±»å‹ç»Ÿè®¡ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `GET /api/mahjong/statistics/monthly` - è·å–æœˆåº¦ç»Ÿè®¡ï¼ˆéœ€è¦è®¤è¯ï¼‰

### ç¤¼é‡‘è®°å½•
- `GET /api/gifts` - è·å–æ‰€æœ‰ç¤¼é‡‘è®°å½•ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `POST /api/gifts` - åˆ›å»ºç¤¼é‡‘è®°å½•ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `PUT /api/gifts/:id` - æ›´æ–°ç¤¼é‡‘è®°å½•ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `DELETE /api/gifts/:id` - åˆ é™¤ç¤¼é‡‘è®°å½•ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `GET /api/gifts/statistics` - è·å–ç¤¼é‡‘ç»Ÿè®¡ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `GET /api/gifts/statistics/event-types` - è·å–äº‹ä»¶ç±»å‹ç»Ÿè®¡ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `GET /api/gifts/statistics/names` - è·å–å§“åç»Ÿè®¡ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `GET /api/gifts/statistics/yearly` - è·å–å¹´åº¦ç»Ÿè®¡ï¼ˆéœ€è¦è®¤è¯ï¼‰

## æŠ€æœ¯æ ˆ

### åç«¯
- Node.js
- Express.js
- SQLite (better-sqlite3)
- JWT (jsonwebtoken)
- bcryptjs

### å‰ç«¯
- React 18
- React Router 6
- Axios
- CSS3

## ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰ï¼š

```env
# æ•°æ®åº“è·¯å¾„ï¼ˆé»˜è®¤ï¼š./database/accounting.dbï¼‰
DB_PATH=./database/accounting.db

# æœåŠ¡å™¨ç«¯å£ï¼ˆé»˜è®¤ï¼š3000ï¼‰
PORT=3000

# JWT å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒè¯·ä¿®æ”¹ä¸ºå¤æ‚å­—ç¬¦ä¸²ï¼‰
JWT_SECRET=your-secret-key-change-in-production

# ç¯å¢ƒæ¨¡å¼ï¼ˆdevelopment æˆ– productionï¼‰
NODE_ENV=development
```

**æ³¨æ„**: å¦‚æœä¸åˆ›å»º `.env` æ–‡ä»¶ï¼Œç³»ç»Ÿä¼šä½¿ç”¨é»˜è®¤é…ç½®ã€‚

## å¼€å‘

### åç«¯å¼€å‘
```bash
npm run dev  # ä½¿ç”¨ nodemon è‡ªåŠ¨é‡å¯
```

### å‰ç«¯å¼€å‘
```bash
cd frontend
npm start  # React å¼€å‘æœåŠ¡å™¨
```

## æ„å»º

### å‰ç«¯ç”Ÿäº§æ„å»º
```bash
cd frontend
npm run build
```

æ„å»ºæ–‡ä»¶å°†è¾“å‡ºåˆ° `frontend/build` ç›®å½•ã€‚

## è®¸å¯è¯

ISC
