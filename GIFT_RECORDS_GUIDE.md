# 礼金记录模块使用指南

## 📖 模块介绍

礼金记录模块帮助您管理人情往来，记录送礼和收礼的详细信息，方便您追踪礼金收支和人际关系维护。

## ✨ 主要功能

### 1. 记录管理
- ✅ **送礼记录**：记录您给他人送出的礼金
- ✅ **收礼记录**：记录您收到的礼金
- ✅ **详细信息**：姓名、事件类型、金额、关系、地点、备注等

### 2. 事件类型
支持多种事件类型：
- 婚礼（结婚喜宴）
- 丧事（白事）
- 乔迁（搬家庆贺）
- 生日（生日宴会）
- 满月（新生儿满月）
- 升学（升学宴）
- 其他

### 3. 关系分类
- 亲戚
- 朋友
- 同事
- 邻居
- 同学
- 其他

### 4. 统计功能
- 📊 **送礼总额**：显示总共送出的礼金金额和次数
- 📊 **收礼总额**：显示总共收到的礼金金额和次数
- 📊 **净额计算**：自动计算收支差额
- 📊 **筛选功能**：按姓名、类型、事件、日期筛选

## 🚀 快速开始

### 第一次使用

1. **初始化礼金记录表**
```bash
npm run init-gifts
```

2. **重启后端服务器**
```bash
# 如果服务器正在运行，先停止（Ctrl+C）
npm start
# 或使用开发模式
npm run dev
```

3. **访问礼金记录页面**
- 登录系统后
- 在左侧菜单中找到 "🎁 礼金记录"
- 点击进入即可开始使用

## 📝 使用说明

### 添加记录

1. 点击页面右上角的 **"+ 添加记录"** 按钮
2. 填写以下信息：
   - **姓名** *（必填）*：对方的姓名
   - **类型** *（必填）*：选择"送礼"或"收礼"
   - **事件类型** *（必填）*：选择事件类型
   - **金额** *（必填）*：礼金金额
   - **日期** *（必填）*：事件发生日期
   - **关系**（可选）：与对方的关系
   - **地点**（可选）：事件举办地点
   - **备注**（可选）：其他需要记录的信息
3. 点击 **"添加"** 按钮保存

### 编辑记录

1. 在记录列表中找到要修改的记录
2. 点击该行的 **"编辑"** 按钮
3. 修改信息后点击 **"更新"** 按钮

### 删除记录

1. 在记录列表中找到要删除的记录
2. 点击该行的 **"删除"** 按钮
3. 确认删除操作

### 筛选记录

使用页面上方的筛选器：
- **姓名搜索**：输入姓名进行模糊搜索
- **类型筛选**：选择"送礼"或"收礼"
- **事件类型**：按事件类型筛选
- **日期范围**：设置开始和结束日期
- 点击 **"重置"** 按钮清除所有筛选条件

## 💡 使用技巧

### 1. 记录命名规范
- 使用真实姓名，便于查找
- 如果有重名，可以在备注中添加更多信息

### 2. 及时记录
- 参加活动后立即记录，避免遗忘
- 可以使用手机访问网页版快速记录

### 3. 定期查看统计
- 定期查看统计卡片了解收支情况
- 使用筛选功能分析不同类型的礼金往来

### 4. 利用备注功能
- 记录礼品种类（如果不是现金）
- 记录特殊情况或重要细节
- 记录双方关系的重要信息

### 5. 关系维护
- 通过日期筛选查看近期往来
- 按姓名搜索查看与特定人物的所有往来
- 注意净额，适时回礼

## 📊 统计卡片说明

页面顶部显示三个统计卡片：

1. **送礼总额**（红色边框）
   - 显示总共送出的礼金金额
   - 显示送礼次数

2. **收礼总额**（绿色边框）
   - 显示总共收到的礼金金额
   - 显示收礼次数

3. **净额**（蓝色边框）
   - 计算收入与支出的差额
   - 绿色表示收入大于支出
   - 红色表示支出大于收入

## 🎯 使用场景

### 场景1：参加婚礼
```
姓名：张三
类型：送礼
事件类型：婚礼
金额：500
日期：2025-12-10
关系：同学
地点：XX大酒店
备注：大学室友
```

### 场景2：孩子满月收礼
```
姓名：李四
类型：收礼
事件类型：满月
金额：200
日期：2025-12-15
关系：同事
地点：自家
备注：部门经理
```

### 场景3：搬家庆贺
```
姓名：王五
类型：送礼
事件类型：乔迁
金额：300
日期：2025-12-20
关系：朋友
地点：新居
备注：送了一套茶具
```

## 🔒 隐私保护

- ✅ 所有数据仅保存在您的账号下
- ✅ 其他用户无法查看您的礼金记录
- ✅ 数据存储在本地数据库中
- ✅ 建议定期备份数据库文件

## 🛠️ 技术信息

### API 端点
所有端点都需要 JWT 认证：

- `GET /api/gifts` - 获取礼金记录列表
- `POST /api/gifts` - 创建新记录
- `GET /api/gifts/:id` - 获取单条记录
- `PUT /api/gifts/:id` - 更新记录
- `DELETE /api/gifts/:id` - 删除记录
- `GET /api/gifts/statistics` - 获取总体统计
- `GET /api/gifts/statistics/event-types` - 获取事件类型统计
- `GET /api/gifts/statistics/names` - 获取姓名统计
- `GET /api/gifts/statistics/yearly` - 获取年度统计

### 数据库表结构
```sql
CREATE TABLE gift_records (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    name TEXT NOT NULL,
    gift_type TEXT NOT NULL,
    event_type TEXT NOT NULL,
    amount REAL NOT NULL,
    event_date DATE NOT NULL,
    relationship TEXT,
    location TEXT,
    notes TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users (id)
);
```

## ❓ 常见问题

### Q: 如何查看和某人的所有往来记录？
A: 在"姓名"搜索框中输入对方姓名即可。

### Q: 可以导出记录吗？
A: 当前版本暂不支持导出，但您可以备份数据库文件。

### Q: 如何备份数据？
A: 定期复制 `database/accounting.db` 文件到安全位置。

### Q: 礼金类型选错了怎么办？
A: 点击"编辑"按钮修改记录，更正类型后保存。

### Q: 为什么看不到礼金记录菜单？
A: 请确保已运行 `npm run init-gifts` 并重启服务器。

## 📱 响应式设计

- ✅ 支持桌面端（电脑）
- ✅ 支持平板电脑
- ✅ 支持手机浏览器
- ✅ 自适应不同屏幕尺寸

## 🎨 界面特点

- 🎨 扁平化设计风格
- 🎨 渐变色彩（粉红到红色）
- 🎨 直观的数据展示
- 🎨 友好的交互反馈
- 🎨 平滑的动画效果

## 📞 技术支持

如遇问题，请检查：
1. 是否已运行初始化脚本
2. 服务器是否正常运行
3. 浏览器控制台是否有错误信息
4. 数据库文件是否存在

---

**礼金记录模块让人情往来更清晰！** 🎁

